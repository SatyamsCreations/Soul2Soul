---
import BaseLayout from '../layouts/BaseLayout.astro';
const base = import.meta.env.BASE_URL;
---

<BaseLayout title="Search â€” Soul2Soul" description="Search posts on Soul2Soul">
  <section class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 py-12">
    <h1 class="text-3xl font-bold tracking-tight text-neutral-900 dark:text-white">Search</h1>
    <p class="mt-2 text-neutral-600 dark:text-neutral-300">
      Type to search posts. The search index is generated after building the site.
    </p>

    <div id="search" class="mt-6"></div>

    <!-- Pagefind UI (available after build: npm run build) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pagefind@1.4.0/pagefind-ui.css" />
    <script src="https://cdn.jsdelivr.net/npm/pagefind@1.4.0/pagefind-ui.js"></script>
    <script is:inline>
      // Initialize Pagefind UI if available (in dev, this may be missing until a production build runs)
      if (window.PagefindUI) {
        new PagefindUI({
          element: "#search",
          showSubResults: true,
          showImages: false,
          translations: {
            placeholder: "Search posts...",
            zero_results: "No results for [SEARCH_TERM]",
            clear_search: "Clear",
          },
        });
      } else {
        const el = document.getElementById('search');
        if (el) {
          el.innerHTML = '<div class="mt-4 text-sm text-neutral-600 dark:text-neutral-300">Search will be available in production after building the site.</div>';
        }
      }
    </script>
  </section>
</BaseLayout>
